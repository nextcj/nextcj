---
title: Rust字符串相关笔记
date: 2024-09-30 09:10:12
categories: [ 'Rust' ]
tags: [ 'String' ]
---

字符串字面值，是被硬编码进程序里的字符串值，它们是不可变的。

字符串数据类型 String 是管理被分配到堆上的数据，能够存储在编译时未知大小的文本。
可以使用 from 函数基于字符串子面值来创建String：`let s = String::from("hello");`
:: 运算符，允许将 from 函数置于String类型的命名空间下。
`s.push_str(", world!"); // push_str() 在字符串后面添加字面值`

对于字符串字面值来说，我们在编译时就知道其内容，文本可硬编码进最终可执行文件，字符串字面值快速而高效。得益于字符串字面值的不可变性。

对于 String 类型，支持一个可变的文本片段，需要在堆上分配一块在编译时未知大小的内存来存放内容。
String 必须在运行时向内存分配器请求内存。需要一个在我们处理完String时将内存返回给内存分配器的方法。

在有GC的语言中，GC记录并清除不再使用的内存，程序员不需要关注它。没有GC机制的语言，识别出不再使用的内存，需要显示的去释放内存，如果忘记回收内存机会造成浪费，如果过早回收内存会造成无效变量，如果重复回收内存会导致BUG。需要精准的为一个
allocate 配对一个 free。

Rust 不一样，内存在拥有它的变量离开作用域后就被自动释放。当变量离开作用域，Rust 为我们调用一个特殊的函数，这个函数叫做 drop。

